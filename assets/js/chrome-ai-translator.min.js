const openGoogleTranslaterAPIModel=(jQuery=>{init=()=>{this.conf=locoConf.conf,this.locale=locoConf.conf.locale,this.project=locoConf.conf.project,this.scrollContainerCallback,this.scrollContainerPosition=0,jQuery("#atlt_chromeAI_btn").on("click",openStringsModal)},openStringsModal=e=>{console.log("hello world");var defaultcode=this.locale.lang?this.locale.lang:null;switch(defaultcode){case"bel":this.defaultLang="be";break;case"he":this.defaultLang="iw";break;case"snd":this.defaultLang="sd";break;case"jv":this.defaultLang="jw";break;case"nb":case"nn":this.defaultLang="no";break;default:this.defaultLang=defaultcode}var arr=["en","zh","no","sq","am","ar","hy","az","eu","be","bn","bs","bg","ca","ceb","ny","zh-CN","zh-TW","co","hr","cs","da","nl","eo","et","tl","fi","fr","fy","gl","ka","de","el","gu","ht","ha","haw","iw","hi","hmn","hu","is","ig","id","ga","it","ja","jw","kn","kk","km","rw","ko","ku","ky","lo","la","lv","lt","lb","mk","mg","ms","ml","mt","mi","mr","mn","my","ne","no","or","ps","fa","pl","pt","pa","ro","ru","sm","gd","sr","st","sn","sd","si","sk","sl","so","es","su","sw","sv","tg","ta","tt","te","th","tr","tk","uk","ur","ug","uz","vi","cy","xh","yi","yo","zu"];let modelContainer=jQuery("div#chrome-ai-translator-model.chrome-ai-translator-container");modelContainer.find(".atlt_actions > .atlt_save_strings").prop("disabled",!0),modelContainer.find(".atlt_stats").hide(),localStorage.setItem("lang",this.defaultLang);const supportedLanguages=["af","jv","no","am","ar","az","ba","be","bg","bn","bs","ca","ceb","cs","cy","da","de","el","en","eo","es","et","eu","fa","fi","fr","ga","gd","gl","gu","he","hi","hr","ht","hu","hy","id","is","it","ja","jv","ka","kk","km","kn","ko","ky","la","lb","lo","lt","lv","mg","mhr","mi","mk","ml","mn","mr","mrj","ms","mt","my","ne","nl","no","pa","pap","pl","pt","ro","ru","si","sk","sl","sq","sr","su","sv","sw","ta","te","tg","th","tl","tr","tt","udm","uk","ur","uz","vi","xh","yi","zh"];supportedLanguages.includes(this.defaultLang)?(jQuery("#atlt-dialog").dialog("close"),modelContainer.fadeIn("slow")):(jQuery("#atlt-dialog").dialog("close"),modelContainer.find(".notice-container").addClass("notice inline notice-warning").html("Chrome AI Translator Does not support this language."),modelContainer.find(".atlt_string_container, .choose-lang, .atlt_save_strings, #ytWidget, .translator-widget, .notice-info, .is-dismissible").hide(),modelContainer.fadeIn("slow"));const translateBtn=jQuery(".chrome-ai-translator #chrome_ai_translator_element #chrome_ai_translator_btn");translateBtn.on("click",startTranslationProcess)},startTranslationProcess=async()=>{const langCode=this.defaultLang;if(!("translation"in self&&"createTranslator"in self.translation))return void console.log("The Translator API is not supported.");const languageSupport=await translation.canTranslate({sourceLanguage:"en",targetLanguage:langCode});"readily"===languageSupport&&translateStrings()},translateStrings=async()=>{const langCode=this.defaultLang,translateStringEle=jQuery("#chrome-ai-translator-model .chrome-ai-translator-body table tbody tr td.target.translate"),stringContainer=jQuery("#chrome-ai-translator-model .modal-content .atlt_string_container"),stringContainerPosition=stringContainer[0].getBoundingClientRect(),translator=await self.translation.createTranslator({sourceLanguage:"en",targetLanguage:langCode}),scrollStringContainer=()=>{stringContainer.scrollTop(this.scrollContainerPosition)},translateStringCall=async index=>{if(index>200)return;const ele=translateStringEle[index],currentPosition=ele.getBoundingClientRect(),containerScrollTop=stringContainer.scrollTop(),containerHeight=stringContainer.height(),conatinerYAxis=containerHeight+containerScrollTop+stringContainerPosition.y,updatedPosition=currentPosition.y-containerHeight-stringContainerPosition.y;currentPosition.y-containerHeight>stringContainerPosition.y&&updatedPosition>this.scrollContainerPosition&&(this.scrollContainerPosition=updatedPosition,clearTimeout(this.scrollContainerCallback),this.scrollContainerCallback=setTimeout(()=>{scrollStringContainer()},20));const orignalString=ele.innerText,translatedString=await translator.translate(orignalString);ele.innerText=translatedString,translateStringEle.length>index+1?translateStringCall(index+1):jQuery("#chrome-ai-translator-model").find(".atlt_save_strings").prop("disabled",!1)};translateStringEle.length>0&&translateStringCall(0)},jQuery(document).ready((function(){init()}))})(jQuery);